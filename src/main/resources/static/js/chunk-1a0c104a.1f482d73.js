(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a0c104a"],{2138:function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login-wrap"},[t("div",{staticClass:"ms-login"},[t("div",{staticClass:"ms-title"},[e._v("码上开始打卡系统")]),t("el-form",{ref:"login",staticClass:"ms-content",attrs:{model:e.loginInfo,rules:e.rules,"label-width":"0px"}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginInfo.username,callback:function(s){e.$set(e.loginInfo,"username",s)},expression:"loginInfo.username"}},[t("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-people"},slot:"prepend"})],1)],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.loginInfo.password,callback:function(s){e.$set(e.loginInfo,"password",s)},expression:"loginInfo.password"}},[t("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-lock"},slot:"prepend"})],1)],1),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submitStuForm()}}},[e._v("学生登录")])],1),t("div",{staticClass:"login-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submitAdminForm()}}},[e._v("管理员登录")])],1),t("el-row",[t("el-col",{attrs:{span:15}},[t("span",{staticClass:"login-tips",on:{click:function(s){return e.register()}}},[e._v("没有账号，注册？")])]),t("el-col",{attrs:{span:9}},[t("span",{staticClass:"login-tips",on:{click:function(s){return e.findPs()}}},[e._v("忘记密码，找回？")])])],1)],1)],1),t("el-dialog",{attrs:{title:"学生注册",visible:e.dialogVisibleReg,width:"30%","before-close":e.handleClose},on:{"update:visible":function(s){e.dialogVisibleReg=s}}},[t("Register")],1),t("el-dialog",{attrs:{title:"找回密码",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(s){e.dialogVisible=s}}},[t("FindPs")],1)],1)},r=[],n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.findPsInfo,rules:e.findPsRules,"label-width":"100px","status-icon":"","label-position":"left"}},[t("el-form-item",{attrs:{label:"学号",prop:"stuId"}},[t("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.findPsInfo.stuId,callback:function(s){e.$set(e.findPsInfo,"stuId",s)},expression:"findPsInfo.stuId"}})],1),t("el-form-item",{attrs:{label:"安全邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.findPsInfo.email,callback:function(s){e.$set(e.findPsInfo,"email",s)},expression:"findPsInfo.email"}})],1),t("el-form-item",{attrs:{label:"新密码",prop:"newPassWord"}},[t("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.findPsInfo.newPassWord,callback:function(s){e.$set(e.findPsInfo,"newPassWord",s)},expression:"findPsInfo.newPassWord"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"reNewPassWord"}},[t("el-input",{attrs:{placeholder:"再次输入密码"},model:{value:e.findPsInfo.reNewPassWord,callback:function(s){e.$set(e.findPsInfo,"reNewPassWord",s)},expression:"findPsInfo.reNewPassWord"}})],1),t("el-row",[t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:"邮箱验证码",prop:"emailCode"}},[t("el-input",{attrs:{placeholder:"验证码"},model:{value:e.findPsInfo.emailCode,callback:function(s){e.$set(e.findPsInfo,"emailCode",e._n(s))},expression:"findPsInfo.emailCode"}})],1)],1),t("el-col",{attrs:{span:5,offset:3}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%"},on:{click:function(s){return e.handleEamilCode()}}},[e._v("获取")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}]},[e._v(e._s(e.count)+" S")])],1)],1),t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(s){return e.submitFindPs()}}},[e._v("确 定")])],1)],1)},a=[],i=(t("d3b7"),t("25f0"),{name:"FindPs",data:function(){var e=this,s=function(s,t,o){""===t?o(new Error("请再次输入密码")):t!==e.findPsInfo.newPassWord?o(new Error("两次输入密码不一致!")):o()},t=function(e,s,t){var o=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!s)return t(new Error("邮箱不能为空"));setTimeout((function(){o.test(s)?t():t(new Error("请输入正确的邮箱格式"))}),100)},o=function(e,s,t){s?6!==s.toString().length?t(new Error("请输入4位验证码!")):t():t(new Error("请输入验证码"))};return{show:!0,count:"",timer:null,findPsInfo:{stuId:"",email:"",newPassWord:"",reNewPassWord:"",emailCode:null,isReg:1},findPsRules:{stuId:[{required:!0,message:"请输入学号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:t,trigger:"blur"}],newPassWord:[{required:!0,message:"请输入新密码",trigger:"blur"}],reNewPassWord:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:s,trigger:"blur"}],emailCode:[{validator:o,trigger:"blur"},{type:"number",message:"验证码必须是数字"},{required:!0,message:"请输入邮箱验证码",trigger:"blur"}]}}},methods:{handleEamilCode:function(){var e=this;console.log("handleEamilCode"),this.$message.success("验证码正在发送，请稍等");var s=60;this.timer||(this.count=s,this.show=!1,this.timer=setInterval((function(){e.count>0&&e.count<=s?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)}),1e3)),this.$axios({url:"/api/user/validationemail",method:"post",data:{email:this.findPsInfo.email}}).then((function(s){console.log(s),"邮件已发送"===s.data.msg&&e.$message.success("验证码发送成功")})).catch((function(e){alert("网络异常，请重试")}))},submitFindPs:function(){var e=this;console.log("submitFindPs"),this.$message.success("正在修改，请稍等"),this.$axios({url:"/api/user/findpassword",method:"post",data:{stuId:this.findPsInfo.stuId,email:this.findPsInfo.email,verificationCode:this.findPsInfo.emailCode,password:this.findPsInfo.newPassWord}}).then((function(s){console.log(s),"密码更新成功"===s.data.msg?e.$message.success("密码更新成功"):e.$message.err(s.data.msg)})).catch((function(e){alert("网络异常，请重试")}))}}}),l=i,u=t("2877"),c=Object(u["a"])(l,n,a,!1,null,null,null),d=c.exports,m=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.regInfo,rules:e.regRules,"label-width":"100px","status-icon":"","label-position":"left"}},[t("el-form-item",{attrs:{label:"学号",prop:"stuId"}},[t("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.regInfo.stuId,callback:function(s){e.$set(e.regInfo,"stuId",s)},expression:"regInfo.stuId"}})],1),t("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.regInfo.userName,callback:function(s){e.$set(e.regInfo,"userName",s)},expression:"regInfo.userName"}})],1),t("el-form-item",{attrs:{label:"安全邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.regInfo.email,callback:function(s){e.$set(e.regInfo,"email",s)},expression:"regInfo.email"}})],1),t("el-form-item",{attrs:{label:"新密码",prop:"passWord"}},[t("el-input",{attrs:{placeholder:"密码"},model:{value:e.regInfo.passWord,callback:function(s){e.$set(e.regInfo,"passWord",s)},expression:"regInfo.passWord"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"rePassWord"}},[t("el-input",{attrs:{placeholder:"再次输入密码"},model:{value:e.regInfo.rePassWord,callback:function(s){e.$set(e.regInfo,"rePassWord",s)},expression:"regInfo.rePassWord"}})],1),t("el-row",[t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:"邮箱验证码",prop:"emailCode"}},[t("el-input",{attrs:{placeholder:"验证码"},model:{value:e.regInfo.emailCode,callback:function(s){e.$set(e.regInfo,"emailCode",e._n(s))},expression:"regInfo.emailCode"}})],1)],1),t("el-col",{attrs:{span:5,offset:3}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%"},on:{click:function(s){return e.handleEamilCode()}}},[e._v("获取")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}]},[e._v(e._s(e.count)+" S")])],1)],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio",{attrs:{label:"0"},model:{value:e.regInfo.sex,callback:function(s){e.$set(e.regInfo,"sex",s)},expression:"regInfo.sex"}},[e._v("女")]),t("el-radio",{attrs:{label:"1"},model:{value:e.regInfo.sex,callback:function(s){e.$set(e.regInfo,"sex",s)},expression:"regInfo.sex"}},[e._v("男")])],1),t("el-form-item")],1),t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(s){return e.submitReg()}}},[e._v("确 定")])],1)},f=[],g=t("2b0e"),p=(new g["default"],{name:"Register",data:function(){var e=this,s=function(s,t,o){""===t?o(new Error("请再次输入密码")):t!==e.regInfo.passWord?o(new Error("两次输入密码不一致!")):o()},t=function(e,s,t){var o=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!s)return t(new Error("邮箱不能为空"));setTimeout((function(){o.test(s)?t():t(new Error("请输入正确的邮箱格式"))}),100)},o=function(e,s,t){s?6!==s.toString().length?t(new Error("请输入4位验证码!")):t():t(new Error("请输入验证码"))};return{show:!0,count:"",timer:null,regInfo:{stuId:"",userName:"",email:"",passWord:"",rePassWord:"",emailCode:null,sex:"0"},regRules:{stuId:[{required:!0,message:"请输入学号",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{validator:t,trigger:"blur"},{required:!0,message:"请输入邮箱",trigger:"blur"}],passWord:[{required:!0,message:"请输入新密码",trigger:"blur"}],rePassWord:[{validator:s,trigger:"blur"},{required:!0,message:"请再次输入密码",trigger:"blur"}],emailCode:[{validator:o,trigger:"blur"},{type:"number",message:"验证码必须是数字"},{required:!0,message:"请输入验证码",trigger:"blur"}]}}},computed:{comRegInfo:function(){var e=this.regInfo;return e.sex=parseInt(e.sex),e}},methods:{handleEamilCode:function(){var e=this;console.log("handleEamilCode"),this.$message.success("验证码正在发送，请稍等");var s=60;this.timer||(this.count=s,this.show=!1,this.timer=setInterval((function(){e.count>0&&e.count<=s?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)}),1e3)),this.$axios({url:"/api/user/validationemail",method:"post",data:{email:this.comRegInfo.email}}).then((function(s){console.log(s),"邮件已发送"===s.data.msg&&e.$message.success("验证码发送成功")})).catch((function(e){alert("网络异常，请重试")}))},submitReg:function(){var e=this;console.log("submitReg"),this.$message.success("正在注册，请稍等"),this.$axios({url:"/api/user/register",method:"post",data:{stuId:this.comRegInfo.stuId,studentName:this.comRegInfo.userName,email:this.comRegInfo.email,verificationCode:this.comRegInfo.emailCode,password:this.comRegInfo.passWord,sex:this.comRegInfo.sex,state:1}}).then((function(s){console.log(s),"success"===s.data.msg?e.$message.success("注册成功"):e.$message.warning(s.data.msg)})).catch((function(e){alert("网络异常，请重试")}))}}}),h=p,b=(t("a616"),Object(u["a"])(h,m,f,!1,null,"4d2fba15",null)),I=b.exports,w={components:{FindPs:d,Register:I},data:function(){return{dialogVisibleReg:!1,dialogVisible:!1,loginInfo:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submitStuForm:function(){var e=this;console.log("submitStuForm"),this.$axios({url:"/api/user/login",method:"post",data:{stuId:this.loginInfo.username,password:this.loginInfo.password}}).then((function(s){console.log(s),"success"===s.data.msg?(e.$message.success("登录成功"),localStorage.setItem("msks_username",e.loginInfo.username),console.log(localStorage.getItem("msks_username")),window.location.href="/student.html#/dashboard"):e.$message.warning(s.data.msg)})).catch((function(e){alert("网络异常，请重试")}))},submitAdminForm:function(){var e=this;console.log("submitAdminForm"),this.$axios({url:"/api/user/teacherLogin",method:"post",data:{teacherId:this.loginInfo.username,password:this.loginInfo.password}}).then((function(s){console.log(s),"success"===s.data.msg?(e.$message.success("登录成功"),localStorage.setItem("msks_username",e.loginInfo.username),console.log(localStorage.getItem("msks_username")),window.location.href="/admin.html#/dashboard"):e.$message.warning(s.data.msg)})).catch((function(e){alert("网络异常，请重试")}))},register:function(){console.log("register"),this.dialogVisibleReg=!0},findPs:function(){console.log("findPs"),this.dialogVisible=!0},submitFindPs:function(){console.log("submitFindPs")},handleClose:function(e){this.$confirm("确认关闭？").then((function(s){e()})).catch((function(e){}))}}},v=w,P=(t("9079"),Object(u["a"])(v,o,r,!1,null,"8b6024f8",null));s["default"]=P.exports},"25f0":function(e,s,t){"use strict";var o=t("6eeb"),r=t("825a"),n=t("d039"),a=t("ad6d"),i="toString",l=RegExp.prototype,u=l[i],c=n((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=i;(c||d)&&o(RegExp.prototype,i,(function(){var e=r(this),s=String(e.source),t=e.flags,o=String(void 0===t&&e instanceof RegExp&&!("flags"in l)?a.call(e):t);return"/"+s+"/"+o}),{unsafe:!0})},7604:function(e,s,t){},9079:function(e,s,t){"use strict";var o=t("ca52"),r=t.n(o);r.a},a616:function(e,s,t){"use strict";var o=t("7604"),r=t.n(o);r.a},ad6d:function(e,s,t){"use strict";var o=t("825a");e.exports=function(){var e=o(this),s="";return e.global&&(s+="g"),e.ignoreCase&&(s+="i"),e.multiline&&(s+="m"),e.dotAll&&(s+="s"),e.unicode&&(s+="u"),e.sticky&&(s+="y"),s}},ca52:function(e,s,t){}}]);
//# sourceMappingURL=chunk-1a0c104a.1f482d73.js.map